<!DOCTYPE html>
<html>
    <body>
        <form id="weatherForm" data-netlify="true" onsubmit="submitForm(event)">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>
                <button type="submit">Submit</button>
                </form>
        
        <div id="resultContainer" style="display: none;">
            <h2>Weather Results</h2>
            <pre id="result"></pre>
        </div>
        
        <script>
            function submitForm(event) {
                event.preventDefault();
                
                const address = document.getElementById("address").value;
                const url = "https://scintillating-empanada-41fce6.netlify.app/.netlify/functions/retrieve-weather";
                
                fetch(url, {
                      method: "POST",
                      headers: {
                      "Content-Type": "application/x-www-form-urlencoded",
                      },
                      body: "address=" + encodeURIComponent(address),
                      })
                      .then((response) => response.text())
                      .then((data) => {
                            const resultContainer = document.getElementById("resultContainer");
                            const resultElement = document.getElementById("result");
                            resultElement.textContent = data;
                            resultContainer.style.display = "block";
                            })
                            .catch((error) => {
                                   console.error("An error occurred:", error);
                                   });
            }
        </script>
    </body>
</html>

